{
    "type":"Composite",
    "name":"top/senior",
    "required" : ["post_unique_reference", "reports_to_senior_post", "$organisation"],
    "bind":[
              {
                "$post":"{$organisation}/post/{post_unique_reference}",
                "$reportsToPost":"{$organisation}/post/{reports_to_senior_post}"
              }, {
                "$holder":"{$dataset}/person{$row.number}"
              }
            ],
    "templates":[
        "senior/post",
        "senior/salary range",
        "senior/holder"
    ],
    "referenced":[
        {
            "name":"senior/post",
            "required" : ["$post"],
            "@id":"<{$post}>",
            "<rdfs:label>":"{job_title.lang('en')}",
            "<skos:prefLabel>":"{job_title.lang('en')}",
            "<rdf:type>":[
                "<{$def_gov}/CivilServicePost>",
                "{$def_gov}/SeniorCivilServicePost"
            ],
            "<{$def_gov}/postIn>":[
                "<{$organisation}>",
                "<{$unit}>"
            ],
            "<org:reportsTo>":"<{$reportsToPost}>",
            "<{$def_csps}/postStatus>":"<{$def_csps}/{name.toLowerCase=='vacant' || name.toLowerCase=='eliminate' ? name.toLowerCase() : 'current'}>",
            "<rdfs:comment>":[
                "{notes.lang('en')}",
                "{job_team_function.lang('en')}"
            ],
            "<{$def_grade}/grade>":"<{$def_grade}/{grade}",
            "<skos:notation>":"{post_unique_reference}",
            "<{$def_gov}/salaryRange>":"<{$salary_base}/{actual_pay_floor_}-{actual_pay_ceiling_}>",
            "<{$def_gov}/heldBy>":"<{$holder}>",
            "^<{$def_gov}/hasPost>" : "<$unit>"
        },
        {
            "name":"senior/salary range",
            "required" : ["$salary_base", "actual_pay_floor_", "actual_pay_ceiling_"],
            "@id":"<{$salary_base}/{actual_pay_floor_}-{actual_pay_ceiling_}>",
            "<rdf:type>":"<{$def_gov}/SalaryRange",
            "<{$def_gov}/lowerBound>":"{actual_pay_floor_}",
            "<{$def_gov}/upperBound>":"{actual_pay_ceiling_}",
            "<rdfs:label>":"{lang('£'+actual_pay_floor_+'-£'+actual_pay_ceiling_,'en')}"
        },
        {
            "name":"senior/holder",
            "required" : ["$holder"],
            "@id":"<{$holder}>",
            "<rdf:type>":"<foaf:Person>",
            "<foaf:mbox>":"<mailto:{contact_e_mail}>",
            "<foaf:name>":"{name}",
            "<foaf:phone>":"{contact_phone}",
            "<{$def_profession}/profession>": "<{professional_occupational_group.map(['profession', 'profession-alt'], $def_profession + '/' + professional_occupational_group.toCleanSegment().value)}>"
        }
    ]
}