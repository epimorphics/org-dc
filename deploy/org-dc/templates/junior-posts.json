{       
    "type":"Composite",
    "name"  : "top/junior",
    "description" : "Mapping fields specific to junior posts",
    "required":["grade"],
    "bind" : {
        "$grade_base" : "{$def_dept}/{$dept_id}/grade",
        "$grade" : "{grade.toCleanSegment()}",
        "$pb_base" : "{$def_dept}/{$dept_id}/payband"
    },
    "templates" : [
        "junior/post",
        "junior/grade",
        "junior/grade-dataset",
        "junior/payband",
        "junior/payband-dataset",
        "junior/salary-range"
    ],
    "oneOffs":[
    ],
    "referenced":[
        {
            "name":"junior/post",
            "@id":"<{$dataset}/juniorPosts{$row.number}>",
            "<rdf:type>": "<qb:Observation>",
            "<qb:dataSet>" : "<{$dataset}/juniorPosts>",
            "<{$def_org}/date>" : "<{$date}>",
            "<{$def_org}/fullTimeEquivalent>" : "{number_of_posts_in_fte}",
            "<{$def_org}/grade>" : "<{$grade_base}/{$grade}>",
            "<{$def_org}/job>" : "<{$def_job}/{generic_job_title.toCleanSegment()}>",
            "<rdfs:label>" : "{grade} {generic_job_title} ({professional_occupational_group}) in {unit} reporting to post {reporting_senior_post} FTE at {$versionDate}"
        },
        {
            "name":"junior/grade",
            "@id":"<{$grade_base}/{$grade}>",
            "<rdf:type>":"<{$def_grade}/Grade>",
            "<skos:topConceptof>":"<{$grade_base}>",
            "^<skos:hasTopConcept>":"<{$grade_base}>",
            "<skos:prefLabel>":"{grade.lang('en')}",
            "<{$def_cspb}/payBand>":"<{$pb_base}/{$grade}>"
        },
        {
            "name":"junior/grade-dataset",
            "@id":"<{$grade_base}>",
            "<rdf:type>":["<void:Dataset>", "<skos:ConceptScheme>"],
            "<skos:prefLabel>":"{lang(parent_department.value + ' Junior Civil Service Grades', 'en')}"
        },
        {
            "name":"junior/payband",
            "required" :["payscale_minimum_", "payscale_maximum_"],
            "@id" : "<{$pb_base}/{$grade}>",
            "<rdf:type>" : "<{$def_cspb}/PayBand>",
            "<skos:topConceptof>":"<{$pb_base}>",
            "^<skos:hasTopConcept>":"<{$pb_base}>",
            "<{$def_gov}/salaryRange>":"<{$salary_base}/{payscale_minimum_}-{payscale_maximum_}>",
            "<skos:prefLabel>" : "{lang(grade.value + ' Payband', 'en')}"
        },
        {
            "name":"junior/payband-dataset",
            "@id":"<{$pb_base}>",
            "<rdf:type>":["<void:Dataset>", "<skos:ConceptScheme>"],
            "<skos:prefLabel>":"{lang(parent_department.value + ' Junior Civil Service Paybands','en')}"
        },
        {
            "name":"junior/salary-range",
            "required" :["payscale_minimum_", "payscale_maximum_"],
            "@id":"<{$salary_base}/{payscale_minimum_}-{payscale_maximum_}>",
            "<rdfs:label>":"£{payscale_minimum_} - £{payscale_maximum_}",
            "<{$def_gov}/lowerBound>":"{payscale_minimum_}",
            "<{$def_gov}/upperBound>":"{payscale_maximum_}",
            "<rdf:type>":"<{$def_gov}/SalaryRange>",
            "<{$def_ref}/uriSet>":"<{$salary_base}>",
            "<foaf:page>":"@@TBD"
        }
    ]
}